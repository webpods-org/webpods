
> webpods-integration-tests@0.0.1 test
> mocha --exit



ðŸš€ Starting WebPods integration test setup...
âœ… WebPods integration test setup complete
  WebPods Authentication
    OAuth Endpoints
      1) should redirect to Google OAuth
      2) should redirect to GitHub OAuth
      âœ” should reject invalid OAuth provider
      3) should handle OAuth callback
    JWT Authentication
      4) should reject requests without auth token to write operations
      âœ” should accept requests with valid auth token
      5) should reject expired JWT token
      6) should reject invalid JWT signature
      7) should reject malformed JWT token
    Public vs Authenticated Access
      8) should allow anonymous read on public streams
      9) should require auth for write on public streams
      âœ” should track author correctly
    Bearer Token Format
      10) should accept Bearer token in Authorization header
      11) should accept token without Bearer prefix
      12) should reject other auth schemes
    Cross-Pod Authentication
      13) should use same auth token across different pods
    User Metadata
      âœ” should store user metadata from OAuth
      âœ” should handle users from different OAuth providers

  WebPods Health Checks
    Main Domain Health
      14) should return healthy status
      âœ” should include service statuses
      15) should include uptime information
      âœ” should return proper content type
    Database Health
      âœ” should detect database connection
      âœ” should report database version
    Pod Subdomain Health
      16) should handle health checks on pod subdomains
      17) should verify wildcard subdomain routing works
    Readiness Check
      âœ” should have a readiness endpoint
    Liveness Check
      âœ” should have a liveness endpoint
    Metrics Endpoint
      âœ” should expose metrics if configured
    Error Handling
      âœ” should handle invalid health check paths
      âœ” should return JSON error for health check failures
    Performance
      âœ” should respond quickly to health checks
      âœ” should handle concurrent health checks
    Environment Information
      âœ” should include environment details
      âœ” should include node version

  WebPods Permissions
    Private Streams
      18) should only allow creator to read private stream
      19) should only allow creator to write to private stream
    Public Streams
      20) should allow anyone to read public stream
      21) should allow any authenticated user to write to public stream
    Permission Streams (Allow/Deny Lists)
      22) should support allow lists for reading
      23) should support deny lists for writing
      24) should support multiple permission streams
    Pod Ownership
      25) should transfer pod ownership via .meta/owner
      âœ” should only allow current owner to transfer ownership
    Stream Permission Updates
      26) should allow creator to update stream permissions
    Complex Permission Scenarios
      27) should handle nested stream paths with permissions
      28) should respect permissions on aliased content
      29) should handle permission stream updates correctly

  WebPods Rate Limiting
    Write Rate Limits
      30) should track write rate limits per user
      31) should track pod creation rate limits separately
      32) should track stream creation rate limits
      33) should not count writes to existing streams as stream creation
    Read Rate Limits
      34) should track read rate limits separately from writes
      35) should track anonymous read rate limits by IP
    Rate Limit Windows
      36) should use hourly windows for rate limiting
      37) should reset count when window expires
      38) should clean up old rate limit windows
    Rate Limit Headers
      39) should return rate limit headers in responses
      40) should decrease remaining count with each request
    Rate Limit Enforcement
      41) should return 429 when rate limit is exceeded
      42) should allow requests from different users independently
    Different Rate Limits by Action
      43) should apply different limits for different actions

  WebPods Stream Operations
    Pod and Stream Creation
      44) should create pod and stream on first write
      âœ” should support nested stream paths
      45) should set custom permissions on stream creation
    Writing Records
      âœ” should write string content
      âœ” should write JSON content
      46) should respect X-Content-Type header
      47) should maintain hash chain
      48) should support aliases (including numeric)
      49) should reject duplicate aliases
    Reading Records
      50) should get record by positive index
      51) should get record by negative index
      52) should get range of records
      53) should get record by string alias
      54) should get record by numeric alias
      55) should list all records with pagination
      56) should return raw content with metadata in headers
    System Streams (.meta/)
      57) should create .meta/owner stream on pod creation
      58) should list streams via .meta/streams
      59) should update .meta/links for URL routing
      âœ” should only allow owner to write to .meta/ streams
    Permissions
      60) should enforce private read permissions
      61) should support permission streams (allow lists)
    Stream Deletion
      62) should delete stream and all records
      63) should prevent deletion of system streams
      64) should only allow creator to delete stream
    Content Types and Serving
      65) should serve HTML directly with correct content type
      66) should serve CSS with correct content type
      67) should serve JSON with correct content type

ðŸ›‘ Shutting down WebPods integration tests...
âœ… WebPods integration test teardown complete

  23 passing (45s)
  67 failing

  1) WebPods Authentication
       OAuth Endpoints
         should redirect to Google OAuth:
     AssertionError: expected 404 to be one of [ 302, 303 ]
      at Context.<anonymous> (src/tests/auth.test.ts:37:37)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  2) WebPods Authentication
       OAuth Endpoints
         should redirect to GitHub OAuth:
     AssertionError: expected 404 to be one of [ 302, 303 ]
      at Context.<anonymous> (src/tests/auth.test.ts:47:37)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  3) WebPods Authentication
       OAuth Endpoints
         should handle OAuth callback:
     AssertionError: expected 404 to be one of [ 400, 401 ]
      at Context.<anonymous> (src/tests/auth.test.ts:63:37)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  4) WebPods Authentication
       JWT Authentication
         should reject requests without auth token to write operations:
     AssertionError: expected 'Token required but not provided' to include 'Authentication required'
      at Context.<anonymous> (src/tests/auth.test.ts:94:46)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  5) WebPods Authentication
       JWT Authentication
         should reject expired JWT token:

      AssertionError: expected 400 to equal 401
      + expected - actual

      -400
      +401
      
      at Context.<anonymous> (src/tests/auth.test.ts:126:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  6) WebPods Authentication
       JWT Authentication
         should reject invalid JWT signature:

      AssertionError: expected 400 to equal 401
      + expected - actual

      -400
      +401
      
      at Context.<anonymous> (src/tests/auth.test.ts:145:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  7) WebPods Authentication
       JWT Authentication
         should reject malformed JWT token:

      AssertionError: expected 400 to equal 401
      + expected - actual

      -400
      +401
      
      at Context.<anonymous> (src/tests/auth.test.ts:154:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  8) WebPods Authentication
       Public vs Authenticated Access
         should allow anonymous read on public streams:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/auth.test.ts:184:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  9) WebPods Authentication
       Public vs Authenticated Access
         should require auth for write on public streams:

      AssertionError: expected 400 to equal 401
      + expected - actual

      -400
      +401
      
      at Context.<anonymous> (src/tests/auth.test.ts:192:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  10) WebPods Authentication
       Bearer Token Format
         should accept Bearer token in Authorization header:

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/auth.test.ts:244:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  11) WebPods Authentication
       Bearer Token Format
         should accept token without Bearer prefix:

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/auth.test.ts:254:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  12) WebPods Authentication
       Bearer Token Format
         should reject other auth schemes:

      AssertionError: expected 400 to equal 401
      + expected - actual

      -400
      +401
      
      at Context.<anonymous> (src/tests/auth.test.ts:264:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  13) WebPods Authentication
       Cross-Pod Authentication
         should use same auth token across different pods:

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/auth.test.ts:292:35)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  14) WebPods Health Checks
       Main Domain Health
         should return healthy status:
     AssertionError: expected { status: 'healthy', â€¦(3) } to have property 'version'
      at Context.<anonymous> (src/tests/health.test.ts:19:37)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  15) WebPods Health Checks
       Main Domain Health
         should include uptime information:
     AssertionError: expected { status: 'healthy', â€¦(3) } to have property 'uptime'
      at Context.<anonymous> (src/tests/health.test.ts:41:37)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  16) WebPods Health Checks
       Pod Subdomain Health
         should handle health checks on pod subdomains:
     AssertionError: expected 200 to be one of [ 404, 302 ]
      at Context.<anonymous> (src/tests/health.test.ts:84:37)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  17) WebPods Health Checks
       Pod Subdomain Health
         should verify wildcard subdomain routing works:
     ReferenceError: require is not defined
      at Context.<anonymous> (src/tests/health.test.ts:101:19)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  18) WebPods Permissions
       Private Streams
         should only allow creator to read private stream:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/permissions.test.ts:66:35)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  19) WebPods Permissions
       Private Streams
         should only allow creator to write to private stream:

      AssertionError: expected 400 to equal 403
      + expected - actual

      -400
      +403
      
      at Context.<anonymous> (src/tests/permissions.test.ts:89:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  20) WebPods Permissions
       Public Streams
         should allow anyone to read public stream:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/permissions.test.ts:109:35)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  21) WebPods Permissions
       Public Streams
         should allow any authenticated user to write to public stream:

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/permissions.test.ts:125:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  22) WebPods Permissions
       Permission Streams (Allow/Deny Lists)
         should support allow lists for reading:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/permissions.test.ts:155:35)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  23) WebPods Permissions
       Permission Streams (Allow/Deny Lists)
         should support deny lists for writing:

      AssertionError: expected 400 to equal 403
      + expected - actual

      -400
      +403
      
      at Context.<anonymous> (src/tests/permissions.test.ts:184:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  24) WebPods Permissions
       Permission Streams (Allow/Deny Lists)
         should support multiple permission streams:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/permissions.test.ts:223:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  25) WebPods Permissions
       Pod Ownership
         should transfer pod ownership via .meta/owner:

      AssertionError: expected 403 to equal 201
      + expected - actual

      -403
      +201
      
      at Context.<anonymous> (src/tests/permissions.test.ts:235:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  26) WebPods Permissions
       Stream Permission Updates
         should allow creator to update stream permissions:

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/permissions.test.ts:269:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  27) WebPods Permissions
       Complex Permission Scenarios
         should handle nested stream paths with permissions:

      AssertionError: expected 404 to equal 403
      + expected - actual

      -404
      +403
      
      at Context.<anonymous> (src/tests/permissions.test.ts:297:35)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  28) WebPods Permissions
       Complex Permission Scenarios
         should respect permissions on aliased content:

      AssertionError: expected 404 to equal 403
      + expected - actual

      -404
      +403
      
      at Context.<anonymous> (src/tests/permissions.test.ts:313:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  29) WebPods Permissions
       Complex Permission Scenarios
         should handle permission stream updates correctly:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/permissions.test.ts:338:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  30) WebPods Rate Limiting
       Write Rate Limits
         should track write rate limits per user:
     AssertionError: expected undefined to exist
      at Context.<anonymous> (src/tests/rate-limit.test.ts:52:27)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  31) WebPods Rate Limiting
       Write Rate Limits
         should track pod creation rate limits separately:
     AssertionError: expected undefined to exist
      at Context.<anonymous> (src/tests/rate-limit.test.ts:72:26)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  32) WebPods Rate Limiting
       Write Rate Limits
         should track stream creation rate limits:
     AssertionError: expected undefined to exist
      at Context.<anonymous> (src/tests/rate-limit.test.ts:89:29)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  33) WebPods Rate Limiting
       Write Rate Limits
         should not count writes to existing streams as stream creation:
     TypeError: Cannot read properties of undefined (reading 'count')
      at Context.<anonymous> (src/tests/rate-limit.test.ts:108:26)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  34) WebPods Rate Limiting
       Read Rate Limits
         should track read rate limits separately from writes:
     TypeError: Cannot read properties of undefined (reading 'count')
      at Context.<anonymous> (src/tests/rate-limit.test.ts:144:25)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  35) WebPods Rate Limiting
       Read Rate Limits
         should track anonymous read rate limits by IP:
     AssertionError: expected undefined to exist
      at Context.<anonymous> (src/tests/rate-limit.test.ts:163:25)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  36) WebPods Rate Limiting
       Rate Limit Windows
         should use hourly windows for rate limiting:
     TypeError: Cannot read properties of undefined (reading 'window_start')
      at Context.<anonymous> (src/tests/rate-limit.test.ts:181:46)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  37) WebPods Rate Limiting
       Rate Limit Windows
         should reset count when window expires:

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/rate-limit.test.ts:205:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  38) WebPods Rate Limiting
       Rate Limit Windows
         should clean up old rate limit windows:

      AssertionError: expected 2 to equal +0
      + expected - actual

      -2
      +0
      
      at Context.<anonymous> (src/tests/rate-limit.test.ts:249:58)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  39) WebPods Rate Limiting
       Rate Limit Headers
         should return rate limit headers in responses:
     AssertionError: expected AxiosHeaders{ â€¦(20) } to have property 'x-ratelimit-limit'
      at Context.<anonymous> (src/tests/rate-limit.test.ts:257:40)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  40) WebPods Rate Limiting
       Rate Limit Headers
         should decrease remaining count with each request:

      AssertionError: expected NaN to equal NaN
      + expected - actual


      at Context.<anonymous> (src/tests/rate-limit.test.ts:275:29)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  41) WebPods Rate Limiting
       Rate Limit Enforcement
         should return 429 when rate limit is exceeded:

      AssertionError: expected 400 to equal 429
      + expected - actual

      -400
      +429
      
      at Context.<anonymous> (src/tests/rate-limit.test.ts:296:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  42) WebPods Rate Limiting
       Rate Limit Enforcement
         should allow requests from different users independently:

      AssertionError: expected 400 to equal 429
      + expected - actual

      -400
      +429
      
      at Context.<anonymous> (src/tests/rate-limit.test.ts:333:35)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  43) WebPods Rate Limiting
       Different Rate Limits by Action
         should apply different limits for different actions:

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/rate-limit.test.ts:370:39)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  44) WebPods Stream Operations
       Pod and Stream Creation
         should create pod and stream on first write:
     AssertionError: expected { sequence_num: +0, â€¦(7) } to have property 'content' of 'Hello WebPods!', but got { content: 'Hello WebPods!' }
      at Context.<anonymous> (src/tests/streams.test.ts:48:37)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  45) WebPods Stream Operations
       Pod and Stream Creation
         should set custom permissions on stream creation:

      AssertionError: expected 403 to equal 201
      + expected - actual

      -403
      +201
      
      at Context.<anonymous> (src/tests/streams.test.ts:91:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  46) WebPods Stream Operations
       Writing Records
         should respect X-Content-Type header:

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/streams.test.ts:134:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  47) WebPods Stream Operations
       Writing Records
         should maintain hash chain:
     AssertionError: expected undefined to be null
      at Context.<anonymous> (src/tests/streams.test.ts:143:49)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  48) WebPods Stream Operations
       Writing Records
         should support aliases (including numeric):

      AssertionError: expected 400 to equal 201
      + expected - actual

      -400
      +201
      
      at Context.<anonymous> (src/tests/streams.test.ts:154:35)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  49) WebPods Stream Operations
       Writing Records
         should reject duplicate aliases:

      AssertionError: expected 400 to equal 409
      + expected - actual

      -400
      +409
      
      at Context.<anonymous> (src/tests/streams.test.ts:172:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  50) WebPods Stream Operations
       Reading Records
         should get record by positive index:
     AssertionError: expected { data: 'Second' } to equal 'First'
      at Context.<anonymous> (src/tests/streams.test.ts:190:32)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  51) WebPods Stream Operations
       Reading Records
         should get record by negative index:
     AssertionError: expected { data: 'Second' } to equal 'Year 2024'
      at Context.<anonymous> (src/tests/streams.test.ts:200:32)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  52) WebPods Stream Operations
       Reading Records
         should get range of records:

      AssertionError: expected [ { sequence_num: +0, â€¦(7) } ] to have a length of 3 but got 1
      + expected - actual

      -1
      +3
      
      at Context.<anonymous> (src/tests/streams.test.ts:210:45)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  53) WebPods Stream Operations
       Reading Records
         should get record by string alias:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/streams.test.ts:217:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  54) WebPods Stream Operations
       Reading Records
         should get record by numeric alias:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/streams.test.ts:223:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  55) WebPods Stream Operations
       Reading Records
         should list all records with pagination:

      AssertionError: expected [ { sequence_num: +0, â€¦(7) } ] to have a length of 2 but got 1
      + expected - actual

      -1
      +2
      
      at Context.<anonymous> (src/tests/streams.test.ts:230:45)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  56) WebPods Stream Operations
       Reading Records
         should return raw content with metadata in headers:

      AssertionError: expected 'application/json; charset=utf-8' to equal 'text/plain'
      + expected - actual

      -application/json; charset=utf-8
      +text/plain
      
      at Context.<anonymous> (src/tests/streams.test.ts:241:51)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  57) WebPods Stream Operations
       System Streams (.meta/)
         should create .meta/owner stream on pod creation:
     TypeError: Cannot read properties of undefined (reading 'id')
      at Context.<anonymous> (src/tests/streams.test.ts:255:30)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  58) WebPods Stream Operations
       System Streams (.meta/)
         should list streams via .meta/streams:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/streams.test.ts:278:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  59) WebPods Stream Operations
       System Streams (.meta/)
         should update .meta/links for URL routing:

      AssertionError: expected 403 to equal 201
      + expected - actual

      -403
      +201
      
      at Context.<anonymous> (src/tests/streams.test.ts:301:34)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  60) WebPods Stream Operations
       Permissions
         should enforce private read permissions:

      AssertionError: expected 404 to equal 200
      + expected - actual

      -404
      +200
      
      at Context.<anonymous> (src/tests/streams.test.ts:350:35)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  61) WebPods Stream Operations
       Permissions
         should support permission streams (allow lists):
     TypeError: Cannot read properties of undefined (reading 'read_permission')
      at Context.<anonymous> (src/tests/streams.test.ts:376:21)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  62) WebPods Stream Operations
       Stream Deletion
         should delete stream and all records:
     Error: socket hang up
      at AxiosError.from (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/AxiosError.js:92:14)
      at RedirectableRequest.handleRequestError (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/adapters/http.js:620:25)
      at RedirectableRequest.emit (node:events:507:28)
      at eventHandlers.<computed> (/home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/follow-redirects/index.js:49:24)
      at ClientRequest.emit (node:events:507:28)
      at emitErrorEvent (node:_http_client:106:11)
      at Socket.socketOnEnd (node:_http_client:598:5)
      at Socket.emit (node:events:519:35)
      at endReadableNT (node:internal/streams/readable:1701:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
      at Axios.request (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/Axios.js:45:41)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Context.<anonymous> (src/tests/streams.test.ts:386:24)
     Caused by: Error: socket hang up
      at Socket.socketOnEnd (node:_http_client:598:25)
      at Socket.emit (node:events:519:35)
      at endReadableNT (node:internal/streams/readable:1701:12)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21)

  63) WebPods Stream Operations
       Stream Deletion
         should prevent deletion of system streams:
     
  AggregateError
      at AxiosError.from (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/AxiosError.js:92:14)
      at RedirectableRequest.handleRequestError (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/adapters/http.js:620:25)
      at RedirectableRequest.emit (node:events:507:28)
      at eventHandlers.<computed> (/home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/follow-redirects/index.js:49:24)
      at ClientRequest.emit (node:events:507:28)
      at emitErrorEvent (node:_http_client:106:11)
      at Socket.socketErrorListener (node:_http_client:574:5)
      at Socket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
      at Axios.request (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/Axios.js:45:41)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Context.<anonymous> (src/tests/streams.test.ts:395:7)

  64) WebPods Stream Operations
       Stream Deletion
         should only allow creator to delete stream:
     
  AggregateError
      at AxiosError.from (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/AxiosError.js:92:14)
      at RedirectableRequest.handleRequestError (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/adapters/http.js:620:25)
      at RedirectableRequest.emit (node:events:507:28)
      at eventHandlers.<computed> (/home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/follow-redirects/index.js:49:24)
      at ClientRequest.emit (node:events:507:28)
      at emitErrorEvent (node:_http_client:106:11)
      at Socket.socketErrorListener (node:_http_client:574:5)
      at Socket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
      at Axios.request (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/Axios.js:45:41)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Context.<anonymous> (src/tests/streams.test.ts:403:7)

  65) WebPods Stream Operations
       Content Types and Serving
         should serve HTML directly with correct content type:
     
  AggregateError
      at AxiosError.from (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/AxiosError.js:92:14)
      at RedirectableRequest.handleRequestError (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/adapters/http.js:620:25)
      at RedirectableRequest.emit (node:events:507:28)
      at eventHandlers.<computed> (/home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/follow-redirects/index.js:49:24)
      at ClientRequest.emit (node:events:507:28)
      at emitErrorEvent (node:_http_client:106:11)
      at Socket.socketErrorListener (node:_http_client:574:5)
      at Socket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
      at Axios.request (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/Axios.js:45:41)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Context.<anonymous> (src/tests/streams.test.ts:430:7)

  66) WebPods Stream Operations
       Content Types and Serving
         should serve CSS with correct content type:
     
  AggregateError
      at AxiosError.from (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/AxiosError.js:92:14)
      at RedirectableRequest.handleRequestError (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/adapters/http.js:620:25)
      at RedirectableRequest.emit (node:events:507:28)
      at eventHandlers.<computed> (/home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/follow-redirects/index.js:49:24)
      at ClientRequest.emit (node:events:507:28)
      at emitErrorEvent (node:_http_client:106:11)
      at Socket.socketErrorListener (node:_http_client:574:5)
      at Socket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
      at Axios.request (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/Axios.js:45:41)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Context.<anonymous> (src/tests/streams.test.ts:442:7)

  67) WebPods Stream Operations
       Content Types and Serving
         should serve JSON with correct content type:
     
  AggregateError
      at AxiosError.from (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/AxiosError.js:92:14)
      at RedirectableRequest.handleRequestError (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/adapters/http.js:620:25)
      at RedirectableRequest.emit (node:events:507:28)
      at eventHandlers.<computed> (/home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/follow-redirects/index.js:49:24)
      at ClientRequest.emit (node:events:507:28)
      at emitErrorEvent (node:_http_client:106:11)
      at Socket.socketErrorListener (node:_http_client:574:5)
      at Socket.emit (node:events:507:28)
      at emitErrorNT (node:internal/streams/destroy:170:8)
      at emitErrorCloseNT (node:internal/streams/destroy:129:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
      at Axios.request (file:///home/jester/repos/webpods-org/webpods/node/packages/webpods-test-utils/node_modules/axios/lib/core/Axios.js:45:41)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Context.<anonymous> (src/tests/streams.test.ts:453:7)



